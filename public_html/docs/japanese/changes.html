<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>変更点 | Geeklogドキュメント</title>
  <link rel="stylesheet" type="text/css" href="../docstyle.css" title="Dev Stylesheet">
  <link rel="stylesheet" type="text/css" href="docstyle.css" title="Dev Stylesheet">
</head>

<body>
<p><a href="http://www.geeklog.jp" style="background:transparent"><img src="../images/newlogo.gif" alt="Geeklog Documentation" width="243" height="90"></a></p>
<div class="menu"><a href="index.html">Geeklogドキュメント</a> - 変更点</div>  

<h1>変更点</h1>

<p>このドキュメントでは最も重要な変更点や目につく変更点を簡潔に説明しています。変更点の詳細なリストは、  
<a href="history">ChangeLog</a>をご覧ください。<tt>docs/changed-files</tt>には、前回リリース以来変更されたファイルの一覧があります。</p>

<h2><a name="changes160">Geeklog 1.6.0</a></h2>

<h3>Summer of Codeの成果</h3>

<p>このリリースには、Google Summer of Code 2008で開発されたコードが実装されています:</p>

<ul>
<li>プラグインインストールのサポート（作者：Matt West）</li>
<li>検索プログラムの機能アップ（作者：Sami Barakat）</li>
<li>コメント操作と編集の機能アップ（作者：Jared Wenerd）</li>
</ul>

<h3>その他の変更</h3>

<ul>
<li>Geeklogは現在PHP 4.3.0以降をサポートしていますが、PHP開発チームは2008年8月にはPHP 4のサポートを終了しています。PHP 4でGeeklogを活用しているユーザは、できるだけはやくPHP 5へのアップグレードを検討してください。</li>
<li><a href="http://www.fckeditor.net/">FCKeditor</a> 2.6.4の実装</li>
<li>新プラグイン「<a href="http://wiki.geeklog.net/index.php/XMLSitemap_Plugin">XMLSitemap</a>」の実装。これは <a
    href="http://www.sitemaps.org/">XML サイトマップファイル</a>を自動生成するもので、おもな検索エンジンに対応しています。プラグインはmystral-kk※により開発されました。<br>
（※訳者註：Geeklog Japaneseコア開発者です。）</li>
<li><a href="http://wiki.geeklog.net/index.php/New_Plugin_API_Functions_in_Geeklog_1.6.0">新しいプラグインAPIの機能</a>がいくつか追加されており、既存のプラグインAPIも機能が拡張されています。</li>
<li>ドキュメントの場所は他言語への翻訳に対応するため、<tt>docs/english</tt>に移動しました。Geeklogから自動的に、そのときに利用している言語のドキュメントへリンクします。（無ければ英語のドキュメントを表示します。）</li>
<li>新しい機能をサポートするために<a href="theme.html#changes">テーマの変更</a> を行い、さまざまなレイアウトの不整合を修正しました。</li>
</ul>

<p>今回のリリースには、Google Summer of Code 2009に参加した学生諸氏のパッチや開発が数多く含まれています。ありがとうございました!</p>



<h2><a name="changes152sr4">Geeklog 1.5.2sr4</a></h2>

<p>Nine Situations グループの Bookoo が usersettings.php の古いバグを対象とする、さらに別のSQLインジェクションの脆弱性を報告しました。前回の問題のように、攻撃者は任意のアカウントのパスワードのハッシュ値を取得できる恐れがありましたが、このリリースで問題は修正されました。</p>


<h2><a name="changes152sr3">Geeklog 1.5.2sr3</a></h2>

<p>Nine Situations グループの Bookoo が、また別のSQLインジェクションの脆弱性が webservices API に存在すると報告しました。前回の問題のように、攻撃者は任意のアカウントのパスワードのハッシュ値を取得できる恐れがありましたが、このリリースで問題は修正されました。</p>


<h2><a name="changes152sr2">Geeklog 1.5.2sr2</a></h2>

<p>Nine Situations グループの Bookoo が glFusion に対してSQLインジェクションの脆弱性を報告しましたが、これは Geeklog も該当していました。この問題により、攻撃者は任意のアカウントのパスワードのハッシュ値を取得できる恐れがありましたが、このリリースで問題は修正されました。</p>


<h2><a name="changes152sr1">Geeklog 1.5.2sr1</a></h2>  

Fernando Muñoz は、管理者用クエリフォームにおいて<a href="http://en.wikipedia.org/wiki/XSS" title="Click to look up 'XSS' on Wikipedia" style="text-decoration: none; color: black; border-bottom: 1px dotted black;">XSS</a>の問題を報告し、このリリースでフィックスしました。 


<h2><a name="changes152">Geeklog 1.5.2</a></h2>

<h3>バグ修正</h3>

<ul>
<li>IDが重複した記事のプレビューを行うと、記事内容が失われるバグを修正しました。</li>
<li>記事のプレビュー時にタイトルに余分なバックスラッシュ（日本語版では\）が表示されるバグを修正しました。</li>
<li>トラックバックエディタのテンプレートにセキュリティトークンがないため、きちんと動作していなかったバグを修正しました。</li>
<li>プレーンテキストで投稿する際に、URLがリンクに変換されない場合がありましたが、このバグを修正しました。</li>
<li>話題のパーミッションの変更など、フィードを更新する際に生じる様々な問題に対処しました。</li>
</ul>

<h3>同梱されているプラグインのバグ修正</h3>

<ul>
<li>カレンダ(Calendar): 個人カレンダに新規イベントを追加できなかったバグを修正しました。</li>
<li>リンク(Links): リンクIDを既存のものに変えると、元から存在していたリンクを上書きしてしまうバグを修正しました。</li>
<li>アンケート(Polls): アンケートIDを変えると、新しいアンケートが作成されるバグを修正しました。また、アンケートの質問にシングルクォートが含まれているとSQLエラーが発生するバグを修正しました。</li>
<li>静的ページ(Static Pages): 静的ページを保存するとオーナーが保存を行った人に変わるバグを修正しました。</li>
</ul>

<h3>他のバグ修正</h3>

<ul>
<li>アップロードされる画像をgdlibを用いて拡大・縮小を行う際の画質を向上させました。</li>
<li>テーマの変更点はいつも通り、<a href="theme.html#changes">テーマ作成</a>に記述してあります。Geeklog-1.5シリーズの全テーマに適用すべきバグ修正が4箇所（そのうち1つはPollsプラグイン）あります。</li>
</ul>


<h2><a name="changes151">Geeklog 1.5.1</a></h2>

<p>Geeklog 1.5.1の大半はバグ修正リリースであり、Geeklog 1.5.0のユーザにはアップグレードをお勧めします。小さなものですが、いくつか機能追加もあります。</p>

<h3>バグ修正</h3>

<h4>セキュリティ関連</h4>

<ul>
<li>t0pP8uZzによると、FCKeditor用のアップロードスクリプトを<a href="http://www.geeklog.net/article.php/file-uploads">直接呼び出すことで</a>様々なメディアファイル（ただし、実行可能なスクリプトを除く）をアップロードすることが可能になっていました。</li>
<li>Mark Evansによると、様々なインクルードファイルに施してある直接実行を防止する対策が、Microsoft Windowsなどの大文字・小文字を区別しないファイルシステムでは不十分でした。</li>
<li>ドラフトフラグをセットしており公開日が未来の記事でも、記事IDを知っていれば、記事を閲覧することが可能になっていました。</li>
<li>記事IDを知っていれば、公開されていない記事でもコメントをつけることが可能になっていました。</li>
<li>データベースのバックアップに失敗したときに、データベースのパスワードが<tt>error.log</tt>に記録されないようになりました。</li>
</ul>

<h4>他のバグ修正</h4>

<ul>
<li>すべての右ブロックが二度レンダリングされていたため、時間のロスになっていただけでなく、ChatterblockやShoutboxなどのアドオンに悪影響を与えていました。</li>
<li>トラックバックのある記事につけられたコメントを削除できないようにしていた（CSRF対策用）セキュリティトークンの扱いを修正しました。</li>
<li>ユーザ投稿承認、記事投稿、ドラフト記事リスト、MS SQLサポートに関してバグ修正を行いました。</li>
</ul>

<h4>同梱プラグインのバグ修正</h4>

<ul>
<li>カレンダ: イベント予定のブロックで、当日のイベントの表示を（今度こそ...）修正しました。</li>
<li>リンク: カテゴリを変更する際に発生するSQLエラーと、IDが重複する場合に新規カテゴリが既存カテゴリを黙って上書きするエラーを修正しました。</li>
<li>静的ページ: <tt>URLリライト</tt>を有効にしている際の印刷用ページを改善しました。</li>
</ul>

<h3>新機能と改善点</h3>

<ul>
<li><a href="http://www.fckeditor.net/">FCKeditor</a> 2.6.3を同梱しました。</li>
<li>多言語モードにしている場合に、ブロックも多言語化できるようになりました。</li>
<li>記事のカテゴリ用に専用のフィードがある場合、「...を購読する」というオプションを追加しました。</li>
<li>記事フィード用に「トップページに表示する記事すべて(All Frontpage Stories)」のオプションを追加しました。「該当する話題にのみ表示」の記事をフィードに含めないようにすることができます。</li>
<li>コンフィギュレーションにおいて、たとえば誤ってあるオプションを「設定(restore)」した後で、元の状態に戻す(unset)ことができるようになりました。</li>
<li>コンフィギュレーションで設定した値を<tt>siteconfig.php</tt>で上書きできるようになりました。<code>$_CONF['rootdebug']</code>オプションなどを設定するのに役に立つでしょう。</li>
<li>リモート認証を行うユーザがWebサービスを利用できるようになりました（ユーザ名として、<tt>ユーザ名@サービス名</tt> を使用する必要があります）。<br>
    <strong>注意:</strong> OpenIDユーザは認証方法に関する技術上の問題のため、Webサービスを<em>利用できません</em>。</li>
<li>Webサービス(AtomPub)の互換性を高めました。</li>
</ul>

<h3>テーマの変更</h3>

<p>1つだけ必須の変更があります: コンフィギュレーションの各項目用テンプレート(<tt>admin/config/config_element.thtml</tt>)を更新してください（Professionalテーマからコピーしてください）。今回のリリースで変更された他のファイルはすべてオプションです。詳細は、<a href="theme.html#changes">テーマの変更点</a>をご覧ください。</p>


<h2><a name="changes150">Geeklog 1.5.0</a></h2>

<h3>Google Summer of Codeの成果をフィードバック</h3>

<p>今回のリリースには、2007 Google Summer of Codeで実装された次のプロジェクトの成果を取り込んでいます。</p>

<ul>
<li>新たな使いやすいインストールスクリプト（作者：Matt West）</li>
<li>（config.phpを直接編集した従来の方式に代わる）新たな設定用GUI（作者：Aaron Blankstein）</li>
<li>Atom Publishing ProtocolをベースとしたWebサービスAPI（作者：Ramnath R. Iyer）</li>
</ul>

<h3>上記以外の新機能や改善</h3>

<ul>
<li>OpenIDサポート: OpenIDを使用したユーザのログインが可能になりました。Geeklogサイトにアカウントを新規作成しなくても、通常のユーザと同様の恩恵を受けられます。</li>
<li><acronym title="Lightweight Directory Access Protocol">LDAP</acronym>リモート認証モジュールの追加</li>
<li>リンク(links)プラグインで階層化されたサブカテゴリを持てるようになりました。</li>
<li><a href="http://www.fckeditor.net/">FCKeditor</a>をversion 2.6にアップグレード</li>
<li>記事処理用コードの書き直し。とりわけ、記事に含まれる特殊文字やHTMLエンティティの扱いに関する主要な問題が全て解消するはずです。また、（ブロックレベルの）<code>[code]</code>に対して、行レベルの<code>[raw]</code>タグが新たにサポートされるようになりました。このタグを使うと、HTMLなどのコードをそのまま投稿する際、HTMLタグとして解釈されないようになります。</li>
<li>コメントを閉じることができるようになりました。つまり、既存のコメントは表示されるが、新規コメントを投稿できないようにできます。</li>
<li>アンケート(polls)プラグインでアンケートごとに複数の質問をできるようになりました。</li>
<li>静的ページ(static pages)プラグインでコメントをサポートするようになりました。</li>
<li>データベースのバックアップ画面で、バックアップしたファイルを削除したり、ダウンロードできるようになりました。</li>
<li>デフォルトのProfessionalテーマがHTML 4.01 Strict準拠になりました。また、<a href="theme.html#xhtml">XHTMLもサポートしています</a>(XHTML準拠のテーマが必要です)。</li>
</ul>

<h3>セキュリティ</h3>

<ul>
<li>Geeklogは、<a href="http://www.geeklog.net/article.php/csrf">クロスサイト・リクエスト・フォージェリ(cross-site request forgery)</a>攻撃に対する防御を備えています。</li>
<li>Lukasz Pilorzが、Geeklogで使用しているHTMLフィルタのksesに関して、<a href="http://www.geeklog.net/article.php/kses">ksesのセキュリティ上の問題点(security issues in kses)</a>を報告してくれました。</li>
</ul>


<h2><a name="changes141">Geeklog 1.4.1</a></h2>

<h3>新機能</h3>

<ul>
<li>Microsoft SQL Serverをサポート。今回のリリースより、GeeklogをMicrosoft SQL Serverにインストールできるようになりました。MySQLだけではなくなったのです。MS SQLサポートはRandy Kolenkoにより開発されました。Randy、ありがとう!<br>
    サードパーティによるプラグインがMicrosoft SQL Serverで動作するには、MS SQLをサポートする必要があります。同梱されているプラグイン(カレンダ, リンク, アンケート, Spam-X, 静的ページ)は既にMS SQLをサポートするようアップグレード済みです。</li>
<li><a href="calendar.html">カレンダプラグイン</a>: 以前は本体に組み込まれていたカレンダとイベント機能は今回からプラグインとして分離されました。Geeklog 1.4.0で実施された<a href="polls.html">アンケート</a>と<a href="links.html">リンク</a>機能に始まるプラグイン化の流れはこれで終了し、Geeklogのモジュール化が進みました。サイトに不要な機能を無効にしたり差し替えることが容易になっています。</li>
<li><a href="http://wiki.geeklog.net/wiki/index.php/Multi-Language_Support">多言語サポート(Multi-language support)</a>： Geeklogを用いて真の多言語サイトの構築が可能になりました。ナビゲーションだけでなくサイトのコンテンツもまた、言語を切り替えれば追随します。</li>
<li><a href="http://www.fckeditor.net/">FCKeditor</a> 2.3.1を同梱。画像をアップロードするファイルマネージャを再び同梱するようにしました。</li>
<li>古いないし活動していないユーザを一括削除する機能を追加。一度もログインしていないユーザやサイトを短期間しか使用していないユーザ、長期間ログインしていないユーザが自動的に検索され、一覧表示されます。期間の長さは変えることができ、検索されたユーザは個別に削除できます。</li>
</ul>

<h3>セキュリティ</h3>

<p>Geeklog 1.4.0以前のバージョンで発見されたセキュリティの問題を考慮して、Geeklogのソースコードの見直しを行いました。今回のリリースでは、いくつか些細な問題を発見して対応し、セキュリティを高める対策をいくつか導入しています。嬉しい副作用として、いくつかのバグと不整合が見つかり、今回のリリースでは修正しています。</p>

<h3>スパム防御</h3>

<p>今回のリリースで、<a href="http://www.geeklog.net/article.php/mt-blacklist-discontinued">更新されていない</a>MT-Blacklistのサポートを完全に廃止しました。代わりに、Russ Jonesが<a href="http://www.linksleeve.org/">www.linksleeve.org</a>で運営している Spam Link Verification (SLV)という手法を採用しています。SLVとは、いわばコミュニティが運営する、自動的に更新されるブラックリストです。詳細は、<a href="spamx.html" rel="nofollow">Spam-Xプラグイン</a>をご覧ください。</p>


<h2><a name="changes140sr6">Geeklog 1.4.0sr6</a></h2>

<p>MustLiveが「友だちに記事をメールする」のフォームを利用した<a href="http://en.wikipedia.org/wiki/XSS" title="Click to look up 'XSS' on Wikipedia" style="text-decoration: none; color: black; border-bottom: 1px dotted black;">XSS</a>の可能性を指摘しました。今回のリリースではこの問題に対応しています。</p>


<h2><a name="changes140sr5-1">Geeklog 1.4.0sr5-1</a></h2>

<p>今回のリリースでは、Geeklog 1.4.0sr5で導入されたばかりのコメントのプレビューで生じる問題を修正しています。</p>


<h2><a name="changes140sr5">Geeklog 1.4.0sr5</a></h2>

<p>JPCERT/CCより、コメントの扱いに関する<a href="http://en.wikipedia.org/wiki/XSS" title="Click to look up 'XSS' on Wikipedia" style="text-decoration: none; color: black; border-bottom: 1px dotted black;">クロスサイト・スクリプティング</a>の可能性に関して通知がありました。今回のリリースではこの問題に対処しています。</p>


<h2><a name="changes140sr4">Geeklog 1.4.0sr4</a></h2>

<p>"rgod"により、セキュアではない方法でインストールされたGeeklogとFCKeditorに含まれている"mcpuk"ファイルマネージャのバグが、以前の1.4.0系のリリースすべてに含まれていることが報告されました。</p>

<ul>
<li>public_htmlディレクトリの外にあるファイルの一部が直接実行される可能性がありました。これらのファイルがURL経由でアクセス可能なようにGeeklogがインストールされている場合(これは、インストール方法では全然お勧めしていない方法です)、リモートサーバから悪意のあるコードをアップロードして、実行するために利用される可能性がありました。
    <br><br>
    詳細は、<a href="http://www.geeklog.net/article.php/so-called-exploit">いわゆるGeeklogの脆弱性投稿(So-called Geeklog "exploit" posted)</a>をご覧ください。
    <br><br>
    今回のリリースでは、public_htmlディレクトリの外にあるファイルが直接実行されるのを防ぐ機能を追加しました。とはいえ、public_htmlディレクトリの外にあるファイルがURL経由でアクセス可能なようにGeeklogをインストールしているなら、修正することをお勧めします(詳細は、<a href="http://www.geeklog.net/faqman/index.php?op=view&amp;t=56">FAQ</a>をご覧くださいdetails)。
</li>
<li>(Geeklogのconfig.phpでFCKeditorを無効にしていても)、FCKeditorに統合されている"mcpuk"ファイルマネージャを使えば、任意のPHPコードをアップロードすることが可能になっていました。Webサーバの設定しだいでは、アップロードしたコードを実行することも可能でした。
    <br><br>
    詳細は、<a href="http://www.geeklog.net/article.php/exploit-for-fckeditor-filemanager">FCKeditorのmcpukファイルマネージャの脆弱性(Exploit for FCKeditor's mcpuk file manager)</a>をご覧ください。
    <br><br>
    今回のリリースでは、該当ファイルマネージャは取り除かれています。したがって、FCKeditor経由で画像などのファイルをアップロードすることはできなくなっています。Geeklogの将来のバージョンでは、更新されたFCKeditorとファイルマネージャを同梱することになるでしょう。
</li>
</ul>

<p>注: 今回のリリースには、トラックバックスパムを防ぐために<a href="http://www.geeklog.net/article.php/fighting-trackback-spam">更新されたlib-trackback.php</a>も含まれています。</p>


<h2><a name="changes140sr3">Geeklog 1.4.0sr3</a></h2>

<p>今回のリリースでは、以下のセキュリティ問題に対応しています。</p>
<ol>
<li><tt>auth.inc.php</tt>でのSQLインジェクションと認証迂回の可能性(the Security Science Researchers Institute Of Iranの報告による)。</li>
<li><tt>getimage.php</tt>でのクロスサイト・スクリプティングの可能性(the Security Science Researchers Institute Of Iranの報告による)。</li>
<li><tt>getimage.php</tt>と、たとえば、Professionalテーマなどの<tt>functions.php</tt>によるパス漏洩(the Security Science Researchers Institute Of Iranの報告による)。</li>
<li>記事投稿の際のSQLインジェクションの可能性。</li>
</ol>


<h2><a name="changes140sr2">Geeklog 1.4.0sr2</a></h2>

<p>今回のリリースでは、以下のセキュリティ問題に対応しました。</p>
<ul>
<li>誰でも任意のユーザとしてログインが可能になるセッションハンドリングのバグ(Konstantin Dyakoffの報告による)。</li>
<li>ユーザプロフィールの場所(Location)フィールドでHTMLタグが除去されていなかった。</li>
</ul>


<h2><a name="changes140sr1">Geeklog 1.4.0sr1</a></h2>

<p>今回のリリースでは、以下のセキュリティ問題に対応しました。</p>
<ul>
<li>Geeklogのクッキーの扱いに起因するいくつかの問題(GulfTech Security ResearchのJames Bercegayによる報告)。SQLインジェクションや任意ファイルへのアクセス、任意のコードの埋め込み及び実行が可能になる脆弱性でした。</li>
</ul>

<p style="padding:5px; border: solid 2px blue;">訳注：以下の和訳は、IvySOHOが公開していたGeeklog-1.4.0日本語版に付属するchanges.htmlを修正して使用しています。</p>

<h2><a name="changes140" id="changes140">Geeklog 1.4.0</a></h2>
<p>(Geeklog 1.4.0 は、元は1.3.12ですので、バージョン1.3.12を参照した場合1.4.0に該当します。)</p>
<h3>新機能</h3>
<ul>
    <li>Geeklogは現在公式には <code>register_globals = off</code> で動いていますが、まだいくつかのプラグインでは、<code>register_globals = on</code> にしなくてはいけないことに注意してください。</li>
    <li><a href="http://en.wikipedia.org/wiki/Trackback">トラックバック</a>や<a href="http://en.wikipedia.org/wiki/Pingback">ピングバック</a>のコメントの送受信向けのサポートが追加されています。それぞれ記事ごとにサポートされていますが、プラグインがこの機能を使えるように新しいプラグインAPIもあります。トラックバックやピングバックはconfig.phpで機能を抑止することが可能です。</li>
    <li>サイトのアップデートを通知するために、ウェブログ・ディレクトリ・サービス<a href="http://blo.gs/">blo.gs</a>など）に更新ピングを送る機能が追加されました。トラックバックやピングバックによって、この機能は記事ごとにサポートされていますが、プラグインもプラグインAIP経由でこの機能を利用することができます。</li>
    <li>Geeklogが<strong>読み取りと書き込み</strong>ができるように、新しいフィード・フレームワークが、RSS1.0だけではなく、複数のフォーマット（現在はRSS、RDF、Atom）でフィードできるようになりました。</li>
    <li>管理者によるユーザ状態の管理機能追加。アカウントの停止・アクティベーションを含む。</li>
    <li>Blogger.comやLiveJournal.comなどのような別のサービスのアカウントを持っている利用者が、サイトに直接登録しなくても自動的にログインできる新しい遠隔認証システムが追加されました（リモートアカウントは、通常アカウントとして禁止することもできます。）。</li>
    <li>管理部分が改訂され、より見やすく分類されたリストとなっています。&ldquo;コマンドとコントロール&rdquo; (moderation.php) も新たなアイコンででき、管理部分ごとにアイコンがあります。さらに、管理ブロック、コマンド、コントロールはアルファベット順にソートできるようになりました。</li>
    <li>FCKeditor(WYSIWYGエディタ)が付いています。作動させるには、config.phpの <code>$_CONF['advanced_editor'] = true</code> に設定してください。</li>
    <li>検索では、大きなデータベースを検索する際のタイムアウトを防ぐため、ページごとの検索結果を指定した件数だけ表示するようになりました。<br><strong>注意</strong><strong>:</strong>「ページ」検索をサポートするには、プラグインをアップデートする必要があります。アップデートをしないと、Geeklogはプラグイン検索ページの結果を正しく表示しません。プラグインがアップデートされていないと、全データベースを検索することになりますが、Geeklogは現在の検索結果のページしか表示しないことになります。</li>
    <li>「記事一覧」が導入され、過去の記事が年ごと月ごとにソートされ、見やすく表示できるようになりました。</li>
    <li>新たなオブジェクト（記事、話題、ブロックなど）のデフォルトパーミッションを、config.phpで設定できるようになりました。</li>
</ul>
<h3>互換性</h3>
<ul>
    <li>変更するには、Geeklog1.4.0で動くようにテーマをアップデートしなくてはいけません。詳細は<a href="theme.html#changes">テーマ変更リスト</a>をご参照ください。</li>
    <li>コメント用のプラグインAPIが改変されました。コメントを利用しているプラグインは、Geeklog1.4.0で動くようにアップデートする必要があります。</li>
</ul>
<h2><a name="changes1311sr2" id="changes1311sr2">Geeklog 1.3.11sr2</a></h2>
<p>このリリースは、Geeklog1.3.12用に独自に開発されたセキュリティ強化と、スパム防御を提供しています。また、バグ修正が適切な仕事量で、少数のバグを処理しています。（その他のバグ修正は1.3.12のリリースをお待ちください。）</p>
<h3>セキュリティとスパム防御</h3>
<ul>
    <li>ログインの試行には速度制限があり、初期値は5分間に3回までの試行です。(config.phpの<a href="config.html#login">login</a>)で設定可能。</li>
    <li>COM_mailではEメールのTo:, From: Subject:のフィールドに含まれる改行コードを除去します。</li>
    <li>新しいユーザアカウントが作成され、ユーザによる投稿承認がconfig.phpで許可されると、万一アカウントの作成が途中で失敗した場合には、新しいアカウントが適切に承認待ちになることを保証しています。</li>
    <li>メールがスパムと確認されると、速度制限が生じます。 (例えば、新たに投稿を行う前に、送信者は速度制限が終了となるのを待つ必要があります。)</li>
    <li>スパムメールは、403&ldquo;禁止&rdquo; HTTP結果コードを取得します。</li>
    <li>スパムチェックは、コメント、記事、リンク、イベントの投稿や「友だちに記事を送信する」オプションで送信されたメッセージや、ユーザプロフィールのコンテンツに対して行われます。</li>
    <li><a href="http://www.geeklog.net/article.php/spam-x-1.0.2">Spam-Xプラグイン1.0.2</a>が含まれています。</li>
</ul>
<p>最近、(Spam-Xで使用されている)MT-Blacklistが<a href="http://www.geeklog.net/article.php/mt-blacklist-discontinued">中止</a>されたことにご注意ください。本リリースに含まれるSpam-Xプラグインは、geeklog.netからブラックリストの最新バージョンを取得するように設定されていますが、アップデートはされません。</p>
<h3>バグ修正</h3>
<ul>
    <li>記事ページを閲覧する場合、PHP5.0.5以降で送られるエラーメッセージを修正します。 (bug #483)</li>
    <li>空白を除き、アルファベットでない文字を含んでいるときは、すぐにEメールアドレスの名前を引き出します。 (bug #368)名前に特別な文字があるユーザにEメールをするときに役立ちます。</li>
    <li>日本語やタイ語でのトラブルを修正するバージョン0.2.2に、ksesクラスを組み込んでアップグレードされています。(bugs #94 and #119)</li>
    <li>[staticpage:] 自動タグを使用する時のSQLエラーが修正されています。(bug #373)</li>
</ul>
<p>バグ修正の全リストは、Changelogを参照ください。</p>
<h3>改良点</h3>
<ul>
    <li>custom_usercheck関数 (顧客登録コード)のサポートが追加されています。詳細はlib-custom.phpをご参照ください。</li>
    <li>index.phpの自動アーカイブオプションの操作が改良され、ページのロード時間が少し改善されました。</li>
    <li>アップデートされた新しい言語ファイルがいくつか含まれています。</li>
    <li>アップデートされたPEARクラスが含まれています。</li>
</ul>


<h2><a name="changes1311sr1" id="changes1311sr1">Geeklog 1.3.11sr1</a></h2>
<p>本リリースは、以下のセキュリティ問題に対応しました。</p>
<ul>
    <li>Stefan Esser が、ユーザのパスワード・ハッシュのようなユーザデータを、ある状況で取り出すように開発できるSQLインジェクションを発見しました。</li>
</ul>
<h2><a name="changes1311" id="changes1311">Geeklog1.3.11</a></h2>
<p>Geeklog 1.3.11 は、Geeklog1.3.10を上回るバグ修正とセキュリティリリースであり、1.3.10に替わるものです。1つのバグ修正が1つのデータベースの変更を伴うので、バージョン番号の変更が必要となりました。</p>
<h3>セキュリティ問題</h3>
<ul>
    <li>ゲストユーザによる投稿がconfig.phpで無効にされていても、ゲストユーザが記事を投稿することが可能でした。 (Barry Wongの報告)<br>しかし、config.phpで無効にしていない限り、これらの記事は承認待ちの状態になっていました。</li>
    <li>リンクやイベント投稿のパラメータがフィルタリングされておらず、SQLインジェクションの可能性がありました。。</li>
    <li>関連ブロック用のリンクが、フィルタリングされていない記事テキストから作成され、クロスサイト・スクリプティング攻撃の可能性がありました。(Vincent Furiaの報告)</li>
</ul>
<h3>バグ修正</h3>
<ul>
    <li>gl_commentsテーブルの&lsquo;sid&rsquo;フィールドの長さが修正されました。20字以上の記事IDを使用することで、コメントメールが記事と取り違えられることを防ぎます。</li>
    <li>PHP 4.1.x (アップデートされた PEARパッケージを含む)との互換性を保証します。</li>
    <li>すばやく起動するアーカイブオプションに修正しています。 (bug #345)</li>
    <li>全話題を削除する場合、コメントや記事画像を的確に削除します。 (bug #339)</li>
    <li>アンケートを削除する場合、コメントを削除します。</li>
    <li>カレンダ内のいくつかのバグを修正し、サイトカレンダとパーソナルカレンダ両方を総合的に処理するように改良します。(bug #268, #336, #338,その他)</li>
    <li>記事内での &quot;More by <em>author</em>&quot; と &quot;More from <em>topic</em>&quot;のリンクを修正します。</li>
    <li>その他いろいろな修正があります。詳細はdocs/historyをご参照ください。</li>
</ul>
<p>Geeklog1.3.10のユーザの方には、1.3.11へできるだけ速やかにアップグレードすることをお勧めします。テーマや言語ファイルあるいは1.3.10以上のconfig.phpでの変更がありませんので、アップグレードは比較的簡単です。</p>
<h2><a name="changes1310" id="changes1310">Geeklog 1.3.10</a></h2>
<h3>新しいデフォルトテーマ</h3>
<p>本リリースには、新しいデフォルトテーマが含まれます。Victor B. Gonzalez ( <a href="http://aeonserv.com/">Aeonserv</a>で有名です)によって提供された専門的なテーマを選びました。テーマは少し修正され、現在HTML4.01とCSS準拠となっています。</p>
<p>また、古いテーマ（クラシック、クリーン、デジタル・モノクローム、ゲームサーバ、スムース・ブルー、Xシルバー、ヤフー）の配信を取りやめることに決定しました。それらは別のターボールとして利用できます。</p>
<h3>新機能</h3>
<ul>
    <li><a href="spamx.html">Spam-Xプラグイン</a>が含まれています。Tom Willetによりスパム検出プラグインが提供され、それはデフォルトでGeeklogの一部としてインストールされます。<br>プラグインが、データベースにブラックリストを保存するために少し修正されました。プラグインの旧バージョンのユーザの方は、プラグインの管理パネルを通して各ブラックリストをインポートする必要があります。</li>
    <li>記事アーカイブ機能: 記事を「アーカイブ」話題に移動するか、所定の時間に自動的に削除することが可能です。</li>
    <li>カスタマイズ・メニュー・バー: サイトのメニューバーは、config.phpで<a href="config.html#menu_elements">設定</a>できます。例えば、どんなエントリがどんな順番で表示されるかを選択できます。また、lib-custom.phpに関数を入れてカスタム項目を追加することもできます。</li>
    <li>テキスト・メールのクリック可能なリンク: HTML ではないメール内のURLはGeeklogにより認識され、クリック可能のリンクとして表示されます。</li>
    <li>編集可能記事ID: 記事のID (静的ページのIDのような)は変更でき、読み取り可能なURLにできます。（検索エンジンによって、特にURLの書き換えをして利用する場合、検出されるチャンスがずっと増えます。） </li>
    <li>自動リンクは記事やコメント内で利用できる新しいフォームのリンクです。自動リンクは名前がタグネームになっていて、IDがリンク先のオブジェクトのIDで、リンクテキストがリンクのテキストとして使われている[<em>name</em>:<em>id</em><em>link text</em>]フォームを取っています。<br>例: [story:email-bug About the email bug]は&lt;a href=&quot;http://example.com/article.php/email-bug&quot;&gt;About the email bug&lt;/a&gt;となります。<br>搭載自動タグに関しては、リンクテキストはオプションで、所定のものがない場合、Geeklogはオブジェクトのタイトル（story, event, static page）を利用します。<br>記事にリンクする[story:]とイベントにリンクする[event:]が、あらかじめ定義された自動タグです。プラグインは自分自身の自動タグを定義して、自分のコントロール下でオブジェクトにリンクすることができます。静的ページのプラグインは、すでに[staticpage:]という自動タグを提供しています。</li>
    <li>カスタマイズ可能のEメール: あなたのサイトに登録しているユーザに送信されたEメールは、テキストファイル(/path/to/geeklog/data/welcome_email.txt)のテキストを利用することで、完全にカスタマイズできます。</li>
    <li>タイムゾーンハック: 一般的な &quot;<a href="http://www.geeklog.net/forum/viewtopic.php?showtopic=40196">タイムゾーンハック</a>&quot; が含まれています。あなたのサーバが別のタイムゾーンにある場合、サイトのタイムゾーンを設定できます。</li>
</ul>
<h3>その他の改良点</h3>
<ul>
    <li>すべての動作を改善するため、さまざまな変更が行われました。</li>
    <li>新しいインストール用に、あなたのMySQLバージョンがInnoDBのテーブル現在のMySQL4.0または3.x&rdquo;Max&rdquo;で作られている）をサポートしていれば、InnoDBテーブル（MyISAMの代わり）を利用できるオプション機能があります。既存のデータベースは、スクリプト admin/install/toinnodb.php.を利用してInnoDBに変換できます。<br>警告:InnoDB テーブルを使用すると、データベースのバックアップがいくらか複雑になります。小さいサイズや中程度のサイズのサイトは、MyISAMテーブルで十分に作動するので、不安な場合はInnoDBテーブルを使用しないでください。</li>
    <li>カレンダの週は、日曜日か月曜日から始められます。</li>
    <li>静的ページのプラグインには、静的ページの印刷用ページを表示するためのオプションがあります。</li>
</ul>
<h3>注釈</h3>
<ul>
    <li>コメントコードは大きく変更されて動作が改善され、個々のコメントやページコメントなどにリンクできるような改良が加えられました。</li>
    <li>ユーザは、サイトの管理者に対し悪意のあるコメントを報告することができるようになりました。</li>
    <li>サイトの管理者は、新しいコメントが送信された場合、Eメール通知を受け取ることができます。（新しい記事、リンク、イベント、ユーザに対するEメール通知と同じです。） </li>
    <li>コメント送信者のIPアドレスは記録され、Whoisサービスにリンクして直接見ることができます。(または、Whois機能を備えたTom Willetの<a href="http://sf.net/project/showfiles.php?group_id=68255&amp;package_id=95743">NetTools</a> をインストールすることができます。)</li>
</ul>
<h3>セキュリティ関連の修正</h3>
<p>注意:以下のバグはすべてGeeklogのパーミッションシステムのトラブルや、「情報漏洩」の類です。たとえば、ある状況下で、サイトのコンテンツが閲覧できなかった人が閲覧できるようになります。これらのバグを使って、特典を得たり、Geeklogやその運営環境にダメージを与えるようには開発されていません。</p>
<ul>
    <li>管理者グループは、そのグループのメンバでなくても、すべてのグループのメンバをリストに可能でした。</li>
    <li>管理者グループは、そのグループのメンバでなくても、システム内のすべてのグループリストがもらえました。(bug #280)</li>
    <li>記事およびイベント管理者は、アクセスして読み込まなくても、すべての記事やイベントのリストを常にもらえました。(bug #269)</li>
    <li>ユーザがその記事を読む許可を持っていなくても（記事とコメントID両方を知っていれば）、その記事からコメントを要求することが可能でした。</li>
    <li>カレンダの日付と週の画面のイベント許可が適切にチェックされず、イベントが見ることができないはずのユーザにそのイベントが閲覧可能でした。</li>
    <li>サイトカレンダの中で閲覧許可がない場合でも（イベントのIDを知っていれば）、パーソナルカレンダに何らかのイベントを追加することが可能でした。</li>
</ul>
<h3>その他のバグ修正</h3>
<ul>
    <li>投稿された記事をプレビューしたり保存したりしても、投稿された記事は承認待ちのままでしたが、実際には新しい記事として保存されていました。</li>
    <li>パーソナルカレンダからのイベント削除が、作動しませんでした。 (bug #199)</li>
    <li>古いユーザフォトは、フォトが異なったファイル形式の場合移動されました。たとえば、.gifから.jpg へ変わる場合です。(bug #228)</li>
    <li>画像の高さは最大値を越えるが、幅は最大値を越えない場合、画像のリサイズは作動しませんでした。(bug #242)</li>
    <li>画像を再リサイズするためにGDライブラリを使用すると、リサイズしていない画像を保存することはできませんでした。(bug #197)</li>
    <li>GDライブラリを使用すると、 GIF画像はPNGフォーマットに変換されましたが、GeeklogはGIFバージョンを表示しようとしていました。 LZW パテントが<a href="http://www.unisys.com/about__unisys/lzw">終了</a>してから、再びGIF画像を使用することが安全となり、PNG変換はなくなりました。</li>
    <li>ターボールにも、ユーザが抱えているEメールトラブルが報告されている、アップグレードされたPEARパッケージが含まれています。(bug #246)<br>注意:これらは、Geeklog1.3.9srに同梱されたのと同じPEARパッケージです。</li>
</ul>
<p><a href="theme.html#changes">テーマ変更</a>もあり、その中のいつくかは、新しい機能を動作させるために重要であることにご注意ください。（たとえば、編集可能な記事IDとその記事・アーカイブのオプション）!</p>
<p>本リリースには、Geeklogのコミュニティによって提供された様々な改良点が含まれています。 (確認のためdocsまたはhistoryファイルをご参照ください。)</p>
<h2><a name="changes139sr3" id="changes139sr3">Geeklog 1.3.9sr3</a></h2>
<p>本リリースは、以下のセキュリティ問題に対応しました。</p>
<ul>
    <li>ゲストユーザの投稿がconfig.phpで無効にされていても、投稿することが可能でした(Barry Wongの報告)。<br>config.phpで無効にしない限り、これらの記事はまだ承認待ちの状態になっていました。<br></li>
    <li>リンクやイベント投稿のパラメータがフィルタリングされておらず、SQLインジェクションの可能性がありました。</li>
</ul>
<h2><a name="changes139sr2" id="changes139sr2">Geeklog 1.3.9sr2</a></h2>
<p>本リリースは、以下のセキュリティ問題に対応しました。</p>
<ul>
    <li>言語ファイル内の変数$topicを使うことで生じたクロスサイト・スクリプティングの脆弱性が修正されました。(bug #293)</li>
    <li>記事やアンケートに関するコメントメールの差し止めで、コメント送信が機能停止になりました。</li>
</ul>
<h3>その他の修正</h3>
<ul>
    <li>PHP5で正確に動作するように、lib-plugins.phpが修正されました。</li>
    <li>完全なターボールには、報告されたEメールトラブルを修正するアップデートされたPEARパッケージも含まれています。</li>
</ul>
<h2><a name="changes139sr1" id="changes139sr1">Geeklog 1.3.9sr1</a></h2>
<p>本リリースは、以下のセキュリティ問題に対応しました。</p>
<ul>
    <li>ゲストユーザのコメント投稿がconfig.phpで無効になっていても、投稿することができていました。<br>このバグは、明らかに一定のGeeklogのサイトへ数百のスパムメールを送信するために、スパマーによって開発されたものです。</li>
    <li>コメント投稿をチェックする速度制限が付加されました。</li>
    <li>どの話題もゲストユーザには見えなかった場合、記事の閲覧許可によっては、サイトのインデックスページがゲストユーザに対して記事を表示していた可能性があります。</li>
    <li>話題に関するデイリーダイジェスト・Eメールを、ユーザがまだ移動した話題から取得していました。(bug #178)</li>
    <li>ユーザが一定の話題にアクセスしなくても、話題すべてに関するデイリーダイジェストを購読することが可能でした。</li>
    <li>プロフィールを見ているユーザが、コメントの掲載されている記事にアクセスする許可を持っていなくても、記事に対するコメントが、ユーザのプロフィールに掲載されることがありました。</li>
</ul>
<h3>その他の修正</h3>
<ul>
    <li>ユーザが自分のレファレンスから話題を除外した場合のCOM_showTopicsのSQLエラーが修正されました。</li>
    <li>ゲストユーザに対する仮セッションIDを処理することで生じたerror.logの &quot;Duplicate entry '...' for key 1.&quot;のメッセージが修正されました。</li>
    <li>デイリーダイジェストの間違った作者名が修正されました。 (bug #207). </li>
    <li>plugin_profileblocksedit_<em>plugin-name</em>プラグインAPI機能が、usersettings.phpのコードの一部を紛失したため作動しませんでした。</li>
</ul>
<p>COM_extractLinksは、&quot;href&quot; を含まないアンカータグを無視することになります。 (bug #183)</p>
<h2><a name="changes139" id="changes139">Geeklog 1.3.9</a></h2>
<h3>新機能</h3>
<ul>
    <li>Geeklogは、すべてのEメールを送信するため、PEAR::Mailを使用しています。それにより、PHPの搭載メール機能（前述）やsendmail、SMTPを介してEメールを送信することができます。</li>
    <li>RSSフィードを作成したり設定したりするContent Syndicationという新しい管理オプションがあります。新たな記事をすべて含んでいる標準フィードに加え、話題ごとや次のイベント用、リンク用のフィードを作成することができます。<br>この機能は、プラグインがフィードを追加できることで拡張可能です。フィードクラスを追加することで、RSS0.91以外のフォーマットでフィードを提供することも可能です。</li>
    <li>管理者は、ブロックのリストからブロックの順番を簡単に変更することができます。</li>
    <li>グループにユーザを追加する代わりとなるインターフェースがあります（JavaScriptが必要です。）。</li>
    <li>管理者グループのユーザは、自分自身がメンバになっているグループに他のユーザを割り当てることだけできます。</li>
    <li>画像のアップロードも、画像をリサイズするためにGDライブラリを使うことができます。</li>
    <li>コメントはテンプレートを使用します。</li>
    <li>ファイルのアップロードを許さない厳しいウェブホストを、標準の画像ディレクトリに適応させるために、新しい設定用変数 <code>$_CONF['path_images']</code> を設定して、記事画像とユーザプロフィールが保存されるウェブツリー外部のディレクトリに進むことができます。</li>
    <li>Geeklogは、記事のURL用のURLリライトをサポートしています。たとえば、Googleのクローラが訪問しやすい http://www.geeklog.net/article.php/20031229225326631 のようなURLを持つことができます。</li>
    <li>プラグインは、Geeklogの新しいブロックに独自のセクションを追加できます。</li>
    <li>すべてのURLフィールドは、255文字まで保存ができます（テーマのアップデートが必要です。）。</li>
</ul>
<p>テーマ変更の完全なリストは、<a href="theme.html#changes">テーマの説明</a>をご参照ください。</p>
<p><a href="staticpages.html">静的ページプラグイン1.4</a>も他の改良点に含まれており、PHPのreturn文を使わずに、静的ページにPHPを組み込む追加のオプション機能があります。</p>
<h3>バグ修正</h3>
<ul>
    <li>検索クエリからの文字は、コメント内でハイライトされています。また、検索クエリが'*' 文字を含む時は、ハイライトすることで問題を修正しました。</li>
    <li>検索クラスでのさまざまな修正</li>
    <li>空のユーザ名でユーザが登録できるバグが修正されました。</li>
    <li>ユーザを一括インポートしている時、そのユーザはみな自動的にデイリーダイジェストを購読していました。(代わりに <code>$_CONF['emailstoriesperdefault']</code> の設定を使います。)</li>
    <li>Rootグループ（たとえば管理者）のユーザが以前利用できたコメント削除のオプション機能が修正されました。実際の記事に対して記事編集許可を持っているユーザは、コメントを削除できます。</li>
    <li>グループの削除は、 group_assignments テーブルに孤立した項目が残る場合があります。 (これは現在修正されました。)1.3.9にアップグレードする場合、インストールのスクリプトは、データベースから孤立した項目を移動することになります。</li>
</ul>
<p>セキュリティ、特にSQLインジェクションに対するセキュリティを改善するために多くの変更がありました。</p>
<h2>Geeklog<a name="changes138-1sr6" id="changes138-1sr6"> 1.3.8-1sr6</a></h2>
<p>本リリースは、以下のセキュリティ問題に対応しました。</p>
<ul>
    <li>言語ファイル内の変数$topicを使うことで生じたクロスサイト・スクリプティングの脆弱性が修正されました。 (bug #293)</li>
    <li>記事やアンケートに関するコメントの差し止めで、コメントの送信が機能停止になりました。</li>
</ul>
<h2>Geeklog<a name="changes138-1sr5" id="changes138-1sr5"> 1.3.8-1sr5</a></h2>
<p>本リリースは、以下のセキュリティ問題に対応しました。</p>
<ul>
    <li>ゲストユーザのコメント投稿がconfig.phpで無効にされていても、コメント投稿が可能でした。<br>このバグは、明らかに一定のGeeklogのサイトへ数百のスパムメールを送信するために、スパマーによって開発されたものです。</li>
</ul>
<h2>Geeklog<a name="changes138-1sr4" id="changes138-1sr4"> 1.3.8-1sr4</a></h2>
<p>本リリースは、以下のセキュリティ問題に対応しました。</p>
<ul>
    <li>管理者グループのユーザやユーザ管理者グループが、Rootグループのメンバになることが可能でした。 (Samuel M. Stoneの報告、bug #135)</li>
    <li>あるエリアの管理者になると（記事に関する記事管理者など）、ユーザがそこにアクセスを許可されていなくても、オブジェクトのIDを知っていれば、そのエリア内（記事など）のすべてのオブジェクトを削除することが可能でした。</li>
    <li>イベントIDを知っていれば、他の人のパーソナルイベントを削除することが可能でした。</li>
    <li>ユーザが実際の記事にアクセスしなくても、記事のコメントを見ることが可能でした。(Peter Roozemaalの報告)</li>
    <li>クロスサイト・スクリプティング問題のために、誰かのアカウント設定を取得して、特に巧妙に作られたリンクをクリックした場合、その設定（パスワードを含む）を変更することが可能でした。 (Jelmerの報告、Vincent Furiaにより提案された修正)</li>
    <li>SQLのインジェクションの可能性から、コメント表示に障害が起きました。 (Jelmerの報告)</li>
    <li>カレンダにJavascriptコードを入れることが可能でした。 (Jelmerの報告)</li>
    <li>コメントプレビューのJavascriptコードを実行することが可能でした。(Jelmerの報告)</li>
</ul>
<h2>Geeklog<a name="changes138-1sr3" id="changes138-1sr3"> 1.3.8-1sr3</a></h2>
<p>本リリースは、以下のセキュリティ関連の問題に対応しました。</p>
<ul>
    <li>指摘されている&quot;dr.wh0&quot;のように、リンク投稿用のカテゴリ・フィールドは、まったくフィルタリングされていませんでした。32文字で多くの障害を生じさせることはおそらくできませんが、現在これは修正されました。</li>
    <li>Vincent Furiaが、ユーザ向けのEメールのフォームに対する制約を回避することができ、その制約をスパムユーザに使用することもできることを発見しました。これらの問題の修正に加え、そのフォームには速度制限もあります。（記事投稿の速度制限に対するデフォルト）</li>
    <li>ゲストユーザのコメント送信が停止された場合でも、送信する方法がありました。</li>
    <li>ほかの誰かのユーザ名でコメントを送信することが可能でした。</li>
</ul>
<h2>Geeklog<a name="changes138-1sr2" id="changes138-1sr2"> 1.3.8-1sr2</a></h2>
<p>Jouko Pynnonen が、1.3.8で導入した新たな「パスワード再発行」の機能を使って、攻撃者がアカウントのパスワードを変えてしまう方法を発見しました。このリリースは、この問題に対応しました。その他の変更はありませんでした。</p>
<p>できるだけ早くアップグレードすることをお勧めします。</p>
<h2>Geeklog<a name="changes138-1sr1" id="changes138-1sr1"> 1.3.8-1sr1</a></h2>
<p>本リリースの掲載目的は、2003年の9月と10月初旬に報告されたセキュリティ問題に対応することです。本バージョンにアップグレードすることを強くお勧めします。</p>
<h3>セキュリティ問題</h3>
<ul>
    <li>Ulf Harnhammar's <a href="http://sourceforge.net/projects/kses/">kses</a> HTMLフィルタを組み込むことにより、このリリースは種々の実行可能なJavascriptインジェクションとCSSの改変問題に対応しています。</li>
    <li>SQLエラーの詳細は、ブラウザではこれ以上報告されることはありません。(Geeklogの error.logファイルだけで報告されます。) これは、エラーメッセージ（報告されたSQLインジェクション問題でわかったトラブルに限り）の一部として重要な情報が漏洩することを防ぐものです。</li>
</ul>
<p>現在はMySQL4.1でGeeklogを使用することを推奨<strong>していない</strong>ことにご注意ください。（これが書かれた時点では、アルファリリース段階で実際に稼働しているサイト上では使用されていません。）Geeklogの次のリリースには、SQLインジェクションをより完全にフィルタリングする機能がつき、MySQL4.1でのトラブルを修正します。</p>
<h3>その他の修正</h3>
<ul>
    <li>URLにポート番号（example.com:8080など）が含まれていた場合、変数 <code>$_CONF['cookiedomain']</code> の値の自動検索が修正されました。これで、一部のユーザが報告していたログインのトラブルが修正されます。</li>
    <li>1.3.8-1sr1の完全なターボールにも、アップデートされたフランス語（カナダ）やトルコ語のファイルが含まれます。</li>
</ul>
<h2>Geeklog<a name="changes138-1" id="changes138-1"> 1.3.8-1</a></h2>
<p>Geeklog 1.3.8-1は、Geeklog1.3.8に対するバグ修正のリリースです。さまざまな（ほとんどマイナーな）バグ修正が含まれています。それらの問題は、どれもセキュリティに関連していません。</p>
<h3>バグ修正</h3>
<ul>
    <li>以前の1.3.8の動作（検索結果が戻ってこない場合、 <code>$_CONF['searchloginrequired']</code> を使ってもう一度検索フォームを表示するなど）を復活させる新しい検索機能に修正します。また日付による検索を修正しました。</li>
    <li>MySQLバージョンの確認を試みた場合の、インストールスクリプトの問題は修正されました。インストールスクリプトは、PHP-4.0.4以前のバージョンでは作動しませんでした。</li>
    <li>画像を含む記事の関連ブロックのトラブルは修正されました。</li>
    <li>デイリーダイジェストを送信するとき、ゲストユーザを対象から外すようにしました。</li>
    <li>管理者がユーザのEメールアドレスを変更する際、別のユーザがすでに使用しているアドレスと重複しないようにしました。</li>
    <li>記事を削除するときは、RSSフィードと古い記事ブロックをアップデートするようにしました。</li>
</ul>
<p>1.3.8-1の完全なターボールにも、新しくアップデートされた言語ファイルが含まれます。（詳細はChangelogをご参照ください。）</p>
<h2><a name="changes138" id="changes138">Geeklog 1.3.8</a></h2>
<h3>新機能</h3>
<p>Geeklog 1.3.8には、静的ページ1.1と1.2のプラグインの両方に替わる<strong>静的ページ</strong><strong>1.3</strong><strong>プラグイン</strong>が含まれています。詳細については<a href="staticpages.html">静的ページの説明</a>をご覧ください。</p>
<ul>
    <li>検索機能が更新されました。ページやすべての言葉、クエリからのどんな言葉も適切に検索できます。検索する言葉は記事の中でハイライトされます。</li>
    <li>新たなプライバシー・オプション: ユーザは、他のユーザや管理者からのEメールを受け取るかどうか、オンラインブロックに自分の名前を出すかどうかを決めることができます。</li>
    <li>あるグループにいるすべてのユーザのリストを取得することができます（管理者グループのエディタから）。</li>
    <li>リサイズが記事の画像用に設定されている場合、リサイズされていない画像を保管できます（最初にconfig.phpで設定されていなければいけません。）。そのような場合、記事の中のリサイズした画像は小さくなって、オリジナルの画像にリンクされます。</li>
    <li>ある話題をデフォルトの話題にできます。記事の投稿フォームでの話題選択で、その話題が初期値になります。しかし、話題 (index.php?topic=Geeklog など)で閲覧する場合、新しい記事の投稿は、現在の話題が初期値になります。</li>
    <li>ユーザにユーザ名を変更させたり、アカウントを削除させたりすることができます。両方の機能ともにconfig.phpで有効にする必要があります。</li>
    <li>拡張プラグインAPI: プラグインは、Geeklogのセンターブロックのコンテンツを表示することができ、ユーザのプロフィールにプラグイン自身の情報を追加でき、またサイトのヘッダ(&lt;head&gt;セクション)に情報を追加することもできます。</li>
    <li>カスタム登録フォーム用に新しいAPIがあります (サンプルコードはlib-custom.phpをご参照ください。)。</li>
    <li>ハードコードされたHTMLの大部分をテンプレートファイルに移動し、テーマデザイナーにレイアウトの管理をさせるために、少しテーマの変更がありました。変更リストは<a href="theme.html#changes138">テーマの説明</a>をご覧ください。</li>
</ul>
<h3>バグ修正</h3>
<ul>
    <li>「パスワード再設定」機能がリライトされました。古いパスワードをリセットして新しいパスワードを送信する代わりに、特定のリンクを含むEメールを受信します。このリンクに従えば、直接新しいパスワードを登録することができます。登録しない場合は、単にそのEメールを無視することができ、古いパスワードが有効のままとなります。</li>
    <li>話題のアクセスが必ずしも適切にチェックされてはいませんでした。記事の管理者が、1.3.8にアップグレードした後で定義されたメッセージにアクセスしたことを伝えてきたら、あなたの話題パーミッションを注意してチェックしてください。</li>
    <li>アンケートエディタで、回答を1回余計に入力できていました（たとえば、回答の最大回数が10回に設定されている場合、実際には11回入力可能でした。）。アンケートをチェックしてください。アンケート回答の最大回数を超えていたら、最後の回答が無効になっているかもしれません。 (必要に応じて、 <code>$_CONF['maxanswers']</code> としてください。)</li>
    <li>Geeklogは、MySQLの古いバージョン（特に3.22.ｘｘ）でインストールして再び動作するようになりました。これらの古いバージョンは、MySQL ABでサポートできないものもあり、3.23.54より古いものをインストールしているMySQLには、セキュリティ問題があることにご注意ください。</li>
</ul>
<h2><a name="changes137sr5" id="changes137sr5">Geeklog 1.3.7sr5</a></h2>
<p>本リリースは、以下のセキュリティ問題に対応しました。</p>
<ul>
    <li>管理者グループのユーザとユーザ管理グループが、Rootグループのメンバになることが可能でした。 (Samuel M. Stoneの報告 bug #135)</li>
    <li>ユーザが記事にアクセスすることが許されていなくても、オブジェクトのIDを知っていれば、あるエリア（たとえば、記事の記事管理者）の管理者になることで、そのエリアのすべてのオブジェクト（たとえば、記事）を削除可能でした。</li>
    <li>イベントIDを知っていれば、他の人のパーソナルイベントを削除することが可能でした。</li>
    <li>ユーザが実際の記事にアクセスしなくても、記事のコメントを閲覧することが可能でした。(Peter Roozemaalの報告)</li>
    <li>クロスサイト・スクリプティング問題のために、誰かのアカウント設定を取得して、特に巧妙に作られたリンクをクリックした場合、その設定（パスワードを含む）を変更することが可能でした。 (Jelmerの報告、Vincent Furiaにより提案された修正)</li>
    <li>SQLインジェクションの可能性から、コメント表示に障害が起きました。 (Jelmerの報告)</li>
    <li>カレンダにJavascriptコードを不正に挿入することが可能でした (Jelmerの報告)。</li>
    <li>コメントプレビューのJavascriptコードを実行可能でした。（保存はできない。）(Jelmerの報告)</li>
</ul>
<h2><a name="changes137sr4" id="changes137sr4">Geeklog 1.3.7sr4</a></h2>
<p>本リリースは、以下のセキュリティ関連の問題に対応しました。</p>
<ul>
    <li>指摘されている&quot;dr.wh0&quot;のように、リンク投稿用のカテゴリ・フィールドは、まったくフィルタリングされていませんでした。32文字で多くの障害を生じさせることはおそらくできませんが、現在これは修正されました。</li>
    <li>Vincent Furia が、ユーザ向けのEメールのフォームに対する制約を回避することができ、その制約をスパムユーザに使用することもできることを発見しました。</li>
    <li>ゲストユーザのコメント送信が停止された場合でも、送信できる方法がありました。</li>
    <li>ほかの誰かのユーザ名でコメントを送ることが可能でした。</li>
</ul>
<h2><a name="changes137sr3" id="changes137sr3">Geeklog 1.3.7sr3</a></h2>
<p>本リリースの目的は、2003年の9月と10月初旬に報告されたセキュリティ問題を対応することです。Geeklogの最新バージョン（これが書かれている時点で、1.3.8-1sr1）にアップグレードする予定がない方には、代わりに少なくとも1.3.7sr3にアップグレードすることをお勧めします。</p>
<h3>セキュリティ問題</h3>
<ul>
    <li>Ulf Harnhammar's <a href="http://sourceforge.net/projects/kses/">kses</a> HTMLフィルタを組み込むことにより、このリリースは種々の実行可能なJavascriptのインジェクションとCSSの改変問題に対応しています。</li>
    <li>SQLエラーの詳細はブラウザではこれ以上報告されることはありません(Geeklogの error.log ファイルだけで報告されます。)。これは、エラーメッセージ（報告されたSQLインジェクション問題でわかったトラブルに限り）の一部として重要な情報の漏洩を防ぐものです。</li>
</ul>
<p>現在はMySQL4.1でGeeklogを使用することを推奨<strong>していない</strong>ことにご注意ください（これが書かれた時点では、アルファリリース段階で実際に運用されているサイト上では使用されていません。）。Geeklogの次のリリースには、SQLインジェクションをより完全にフィルタリングする機能がつき、MySQL4.1でトラブルを修正します。</p>
<h2><a name="changes137sr2" id="changes137sr2">Geeklog 1.3.7sr2</a></h2>
<h3>セキュリティ問題</h3>
<p>本リリースの目的は、以下のセキュリティ問題を修正することです。すべてのユーザには、本バージョンにできるだけ速やかにアップグレードすることを強くお勧めします。</p>
<ul>
    <li>管理者アカウントを含め、Geeklogサイトのアカウントごとに有効なセッションIDを取得することが可能でした。 (SCANアソシエイツの報告)</li>
    <li>Internet Explorerを使うと、埋め込まれたPHPコードで画像をアップロードでき、実行することが可能でした。 (SCAN アソシエイツの報告)</li>
    <li>記事のパーミッションが話題のパーミッションを無効にしてしまい、アクセスできなかったユーザに記事を表示する結果となりました(Andrew Lawlorの報告)。これは2003年5月15日にリリースされた新しいindex.phpで既に修正されました。</li>
    <li>以下のタグのいずれかを許可されたHTMLのリストに追加すると、サイトがスクリプトの攻撃を受けやすくなってしまうという警告がconfig.phpに追加されました。<br>&lt;img&gt; &lt;span&gt; &lt;marquee&gt; &lt;script&gt; &lt;embed&gt; &lt;object&gt; &lt;iframe&gt;<br>( Joat Dedeの指摘)</li>
</ul>
<p>このアップデートには、ユーザが管理エリアで見る「アクセスが拒否されました」というよく見られるエラーメッセージに対する修正が含まれています。（たとえば、記事を保存しようとしたり、記事管理者許可のあるユーザ「のみ」とする場合）</p>
<p>1.3.7sr2の完全なターボールにも、アップデートされた種々の新しい言語ファイルが含まれています（詳細はChangelogをご参照ください。）。</p>
<h2><a name="changes137sr1" id="changes137sr1">Geeklog 1.3.7sr1</a></h2>
<h3>セキュリティ問題</h3>
<p>本リリースの主な目的は、以下のセキュリティ問題を修正することです。ユーザの方には、本バージョンにアップグレードすることを強く推奨いたします。</p>
<ul>
    <li>Javascriptコードをユーザのプロフィールのホームページ面に埋め込むことが可能でした。 (Jin Yean Tanの報告)</li>
    <li>Javascriptコードを、クロスサイト・スクリプティング攻撃で使用するために、一定のURLに埋め込むことが可能でした。(Jin Yean Tanの報告)</li>
    <li>コメントID（通常は見えません）を知っていれば、コメントを誰かが削除することが可能でした。</li>
    <li>記事にアクセスしなくても（たとえば、あるグループのメンバでない場合）、記事管理者が記事を操作可能でした。イベント、リンク、アンケート、話題、ブロックの管理者にも同じことが可能でした。（Kobazの報告)</li>
</ul>
<h3>その他のバグ修正</h3>
<ul>
    <li>index.phpで、リダイレクトが無限ループになる可能性を修正しました。 <code>$HTTP_SERVER_VARS['HTTP_HOST']</code> が設定されていなければ、リダイレクトを起こしません。また、設定と実際のサーバネームを比較すれば、もう不安定な状態にはなりません。</li>
    <li>ImageMagickを使用する時に、リサイズする画像を修正しました。</li>
    <li>「ユーザ」が、<code>$_CONF['notification']</code> に登録されていなくても、新しいユーザ通知Eメール（Geeklog1.3.7で導入されている）が常に送信されました。</li>
    <li>管理メニューは、管理機能のコアの一部ではなくプラグインのみに対して管理者アクセスしているユーザに表示されています。</li>
    <li>デイリーダイジェスト用のデフォルトは、 <code>off</code> に戻ります。たとえば、新しいユーザは自動的にダイジェストを受け取りません。新しいユーザ向けのデイリーダイジェストを再び可能にするには、config.phpに <code>$_CONF['emailstoriesperdefault'] = 1</code> を設定してください。</li>
</ul>
<p>ドキュメント及びハードコードされたリンク（バージョンチェック、サイトのフッタのGeeklogへのリンク）は、<a href="http://www.geeklog.net/">http://www.geeklog.net/</a> へ行くようにアップデートされました。</p>
<h2><a name="changes137" id="changes137">Geeklog 1.3.7</a></h2>
<h3>新機能</h3>
<ul>
    <li>通知Eメールは、新しい記事、リンク、あるいはイベントが掲載されたか、新しいユーザがそのサイトに登録したときに送信されます(詳細は<a href="config.html#submission">投稿の設定</a>をご参照ください。)。<br>この機能がGeeklogのセキュリティ機能と一緒にはなっていないことにご注意ください。多くの方からこの機能性が望まれたので、本当にハック以上のものでした。</li>
    <li>新着ブロックの「過去24時間の記事」をクリックすると、新しい記事が表示されます。</li>
    <li>ユーザの写真は、記事の画像と同じくリサイズされています（画像ライブラリの使用が設定されている場合）。ユーザの写真の最大サイズは、config.phpの別々の設定変数で設定できます。</li>
    <li>プラグインメニューは、ファイルシステムに存在するがまだインストールしていないプラグインすべてを表示しています。また、容易にインストールできるように、それらのプラグインのインストールスクリプトへのリンクも提供しています。</li>
    <li>いくつかの新しい設定変数が、config.phpに追加されました。(<code>notification, showfirstasfeatured, dateonly, timeonly, skip_preview, upcomingeventsrange, emailstoryloginrequired, hideemailicon, hideprintericon, hidenewstories, hidenewcomments, hidenewlinks, max_photo_width, max_photo_height, max_photo_size</code>). 詳細は<a href="config.html">configの説明</a>をご参照ください。</li>
    <li>テーマ変更: 変更リストは<a href="theme.html#changes137">テーマの説明</a>をご参照ください。</li>
</ul>
<h3>バグ修正</h3>
<ul>
    <li>不完全な言語ファイルを使った場合（あるいはURLを利用した場合）に、すべての記事を消去させないように、管理者記事エディタにしっかりしたチェックを加えました。</li>
    <li>UserAdminパーミッションを持つユーザに、Rootユーザのパスワードを変更させ、実際にRootになるlib-security.phpの危険なバグを修正しました。</li>
    <li>&quot;homeonly&quot;と設定されるとブロックが消えるトラブルを修正しました。</li>
    <li>記事とコメントの複数の [code] ... [/code]部分のトラブルを修正しました。</li>
    <li>[code]部分とPHP4.2.0以上のHTMLフォーマットのコメントでの2行スペーシングを修正しました。</li>
    <li>Geeklogで送信されたEメールのスラッシュ'/'とHTMLエンティティのトラブルを修正しました。</li>
    <li>プラグインAPIへの修正と改良 </li>
</ul>
<p>寄稿者: Blaine Lang, Vincent Furia, 及びKenn Osborneが本リリースに寄稿いたしました。</p>
<h3><a name="addindex" id="addindex">Geeklog</a>のスピードアップ (少しだけ)</h3>
<p>1.3.6以前の古いバージョンからアップグレードする場合、installディレクトリにあるaddindex.phpと呼ばれるスクリプトを実行する必要が出てくるかもしれません。このスクリプトは、Geeklogのデータベーステーブルのいくつかにインデックスフィールドを付加し、アクセス時間全体を少し改善します。</p>
<p>データベースにどれくらいのユーザや記事などがあるかによって、実行時間がかかるかもしれないので、これは別々のスクリプト（インストールスクリプトのアップグレード処理の一部ではなく）として実行されました。たとえば、ホスティングサービスがPHPスクリプトの実行時間に制限を与えている場合、タイムアウトになる人がいるかもしれません。そういうことになっても、慌てないでください。どのテーブルにもフィールドが追加されませんでしたと通知されるまで、何度もそのスクリプトを実行してください。 (何度も何度も ...)</p>
<p>Geeklog1.3.7を新しくインストールすれば、このスクリプトを実行する必要がないことにご注意ください。新たにインストールしている間に生成されたデータベースには、すでに新しいインデックスフィールドがあります。</p>
<h2><a name="changes136" id="changes136">Geeklog 1.3.6</a></h2>
<h3>新機能</h3>
<ul>
    <li>記事の画像は、アップロード中に自動的にリサイズできます（ImageMagickかnetpbmのどちらかがインストールされている場合）。詳細については、<a href="config.html#image">コンフィギュレーションの説明</a>をご参照ください。</li>
    <li>&quot;Frontpage&quot; というタイトルの静的ページのコンテンツは、Geeklogサイトでフロントページ上の最初の記事の前に表示されます。静的ページがさらに&rdquo;nonews&rdquo;ラベルをつけている場合は、完全にフロントページのニュースを入れ替えることになります。</li>
    <li>ユーザによる投稿を承認する: 有効な場合(<a href="config.html#submission">config.php</a>で)、新しいユーザは自分のパスワードを受け取る前に、管理者によって承認される必要があります。</li>
    <li>投稿承認は別々に、完全に（<a href="config.html#submission">config.php</a>で）かまたは一定のユーザグループのみで取り消すことができます。(新しい機能 story.submit、links.submit、 event.submitを使って)</li>
    <li>ソースコード（PHP、HTMLなど）を送信すると、[code] ... [/code]という擬似タグを使って、一字一句変えずに再生された送信文を封入できます。</li>
    <li>リンクセクションでは、分類、ページ分けされたディスプレイ（別々に<a href="config.html">オフ</a>できて、以前の1.3.6スタイルのリスティングにも戻れます。）が使われています。</li>
    <li>必要ならば、ゲストユーザをサイトのほとんどすべての部分（たとえば、リンクセクション、サイト統計）から締め出すことができます。</li>
    <li>Geeklogサイトは、<a href="config.html#site">config.php</a>にフラグを設定して簡単に機能停止することができます。（たとえばメンテナンスの場合など） </li>
    <li>テーマ変更: 変更リストは<a href="theme.html#changes136">テーマの説明</a>をご参照ください。</li>
</ul>
<h3>バグ修正</h3>
<ul>
    <li>いくつかの修正で、アカウントに対するパーミッションが適切に設定されることが保証されました（たとえば、ユーザがアクセス権を持たない記事のタイトルを表示しない。）。</li>
    <li>Geeklogが適切にローカライズされることを確認できるように、いくつか修正が行われました。（最新の言語ファイルを持っていて、国と言語に適した<a href="config.html#locale">ローカル設定</a>を選択した場合。） </li>
    <li>変数 <code>$_CONF['site_admin_url']</code> を、Geeklogの管理ディレクトリをリネームすることができるように、適切に使用しています。</li>
    <li>新しい RDFパーサは、（全部ではないにせよ）ほとんどのRDFニュースフィードを適切にインポートします。</li>
</ul>
<h3>注意</h3>
<ul>
    <li>config.phpには新しい変数がたくさんあるので、前回のインストールから古いconfig.phpをコピーする代わりに、そのファイルを新たにコピーすることをお勧めします。</li>
    <li>英語、ドイツ語、イタリア語、ポーランド語、日本語のファイルが、最近アップデートされたことにご注意ください。その他の言語ファイルを使用すると、あなたのGeeklogサイトがきちんと動かない場合があります。</li>
</ul>
<p>寄稿者: Gene Wood、 Blaine Lang、 Tom Willet、及び Roger Websterが本リリースに寄稿いたしました。</p>

<div class="footer">
    <a href="http://wiki.geeklog.net">Geeklogドキュメント作成プロジェクト(The Geeklog Documentation Project)</a><br>
    本ページのすべての商標と著作権はそれぞれの所有者に帰属します。Geeklogはコピーレフトです。
</div>

</body>
</html>
