<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <title>リンクプラグイン | Geeklogドキュメント</title>
  <link rel="stylesheet" type="text/css" href="../docstyle.css" title="Dev Stylesheet" />
  <link rel="stylesheet" type="text/css" href="docstyle.css" title="Dev Stylesheet" />
</head>

<body>
<p><a href="http://www.geeklog.jp" style="background:transparent"><img src="/docs/images/logo.gif" alt="Geeklog Documentation" width="243" height="90" /></a></p>
<div class="menu"><a href="index.html">Geeklogドキュメント</a> - リンクプラグイン</div>

<h1>リンクプラグイン</h1>

<p>リンクセクションはかつてGeeklogのコアコードの一部でしたが、Geeklog 1.4.0よりプラグインとして分離されました。</p>

<h2><a name="config.php">設定</a></h2>

<p>リンクプラグインの設定は、「管理者用メニュー - コンフィギュレーション - リンク」から変更できます。</p>

<h3><a name="public">リンクの表示に関する設定</a></h3>

<table>
<tr><th style="width:25%">項目(変数)</th>
    <th style="width:25%">デフォルト</th>
    <th style="width:50%">説明</th>
</tr>
<tr>
  <td><a name="desc_linksloginrequired">ログインを要求する(linksloginrequired)</a></td>
  <td>いいえ(0)</td>
  <td>はい(1)にすると、登録ユーザーしかリンクセクションにアクセスできなくなります。<br />
    この設定値よりも、「管理者用メニュー - コンフィギュレーション - Geeklog - ユーザーと投稿」の「<a href="config.html#desc_loginrequired">すべてにログインを要求する(loginrequired)</a>」の設定の方が優先されるます。「すべてにログインを要求する」をはい(1)にすると、リンクプラグインでログインを要求していなくても、ゲストユーザーはリンクセクションにアクセスできなくなります。</td>
</tr>
<tr>
  <td><a name="desc_linkcols">カテゴリの表示カラム数(linkcols)</a></td>
  <td>3</td>
  <td>1カラム（列）ごとに表示するリンクカテゴリの数を指定します。</td>
</tr>
<tr>
  <td><a name="desc_linksperpage">ページあたりのリンク数(linksperpage)</a></td>
  <td>10</td>
  <td>1ページごとに表示するリンクの数を指定します。</td>
</tr>
<tr>
  <td><a name="desc_show_top10">トップ10を表示する(show_top10)</a></td>
  <td><code>はい(true)</code></td>
  <td>「カテゴリの表示カラム数(linkcols)」と「ページあたりのリンク数(linksperpage)」がともに 0 で<strong>ない</strong>とき、リンクプラグインはそのトップページに最もクリックされたリンクの上位10位を自動的に表示します。表示したくなければ、この設定をいいえ(<code>false</code>)にします。</td>
</tr>
<tr>
  <td><a name="desc_show_category_descriptions">カテゴリの説明を表示する(show_category_descriptions)</a></td>
  <td><code>はい(true)</code></td>
  <td>はい(true)にすると、カテゴリを表示するときにサブカテゴリの説明を表示します。</td>
</tr>
<tr>
  <td><a name="desc_new_window">リンクを新しいウィンドウで開く(new_window)</a></td>
  <td><code>false</code></td>
  <td>外部サイトへのリンクを新規ウィンドウで開くかどうかを指定します。<br />
  <strong>注意:</strong> このオプションは注意してください。ユーザーが<a
    href="http://diveintoaccessibility.org/day_16_not_opening_new_windows.html">操作</a>時に当惑したり、いらいらする可能性があります。</td>
</tr>
<tr>
  <td><a name="desc_recaptcha">reCAPTCHA(recaptcha)</a></td>
  <td>'reCAPTCHA V2'</td>
  <td>使用するreCAPTCHAのバージョンを設定します。
    <ul>
      <li>無効: reCAPTCHAを表示しません。</li>
      <li>reCAPTCHA V2: reCAPTCHA V2を表示します(デフォルト)</li>
      <li>reCAPTCHA V2 Invisible: reCAPTCHA V2 Invisibleを表示します。</li>
    </ul></td>
</tr>
</table>

<h3><a name="admin">リンクの管理</a></h3>

<table>
<tr><th style="width:25%">項目(変数)</th>
    <th style="width:25%">デフォルト</th>
    <th style="width:50%">説明</th>
</tr>
<tr>
  <td><a name="desc_hidenewlinks">新着情報ブロックに表示しない(hidenewlinks)</a></td>
  <td>いいえ(0)</td>
  <td>はい(1)にすると、新着リンクが新着情報ブロックに表示されなくなります。</td>
</tr>
<tr>
  <td><a name="desc_newlinksinterval">リンクの"新着"期間(newlinksinterval)</a></td>
  <td>1209600秒 (= 2週間)</td>
  <td>が新着ブロックに表示される期間を秒数で指定します。</td>
</tr>
<tr>
  <td><a name="desc_hidelinksmenu">メニューに表示しない(hidelinksmenu)</a></td>
  <td>いいえ(0)</td>
  <td>はい(1)にすると、サイトのメニューに「リンク」メニューを表示しません。</td>
</tr>
<tr>
  <td><a name="desc_linksubmission">リンクの投稿を管理者が承認する(linksubmission)</a></td>
  <td>はい(1)</td>
  <td>はい(1)にすると、ユーザーが投稿したリンクは管理者の承認待ちの状態になり、いいえ(0)にすると、即座に登録・表示されます。</td>
</tr>
<tr>
  <td><a name="desc_notification">メールで通知する(notification)</a></td>
  <td>いいえ(0)</td>
  <td>はい(1)にすると、新規リンクが投稿されたときに、管理者にEメールで通知します。</td>
</tr>
<tr>
  <td><a name="desc_delete_links">所有者の削除と共に削除する(delete_links)</a></td>
  <td>いいえ(0)</td>
  <td>はい(1)にすると、リンク所有者のアカウントが削除されたときに、所有していたすべてのリンクが削除され、いいえ(0)にすると、Rootグループに属するユーザー（たとえば、サイトの管理者）に引き継がれます。</td>
</tr>
<tr>
  <td><a name="desc_aftersave">リンク保存後の画面遷移(aftersave)</a></td>
  <td>リンク管理を表示する(list)</td>
  <td>リンクを保存した後にどのページへ移動するかを指定します。
    <ul>
    <li>リンク先サイトを表示する(item): リンク先サイトへ移動します。</li>
    <li>リンク管理を表示する(list): 管理者用のリンクのリストを表示します（デフォルト）。</li>
    <li>公開リンクリストを表示する(plugin): 公開されているリンク一覧を表示します。</li>
    <li>Homeを表示する(home): サイトのHomeページ（トップページ）を表示します。</li>
    <li>管理画面TOPを表示する(admin): 管理画面を表示します。</li>
    </ul></td>
</tr>
<tr>
  <td><a name="desc_root">トップカテゴリのID(root)</a></td>
  <td>site</td>
  <td>最上位のリンクカテゴリに使用するリンクIDを指定します。</td>
</tr>
</table>

<h3><a name="search">リンクのパーミッション</a></h3>

<table>
<tr><th style="width:25%">項目(変数)</th>
    <th style="width:25%">デフォルト</th>
    <th style="width:50%">説明</th>
</tr>
<tr>
  <td valign="top"><a name="desc_default_permissions_0">パーミッションのデフォルト[0](default_permissions[0])</a></td>
  <td valign="top"><em>表示・編集</em></td>
  <td valign="top">リンクに関する所有者のパーミッションのデフォルトを指定します。</td></tr>
<tr>
  <td valign="top"><a name="desc_default_permissions_1">パーミッションのデフォルト[1](default_permissions[1])</a></td>
  <td valign="top"><em>表示</em></td>
  <td valign="top">リンクに関するグループのパーミッションのデフォルトを指定します。</td></tr>
<tr>
  <td valign="top"><a name="desc_default_permissions_2">パーミッションのデフォルト[2](default_permissions[2])</a></td>
  <td valign="top"><em>表示</em></td>
  <td valign="top">リンクに関するメンバーのパーミッションのデフォルトを指定します。</td></tr>
<tr>
  <td valign="top"><a name="desc_default_permissions_3">パーミッションのデフォルト[0](default_permissions[3])</a></td>
  <td valign="top"><em>表示</em></td>
  <td valign="top">リンクに関するゲストユーザーのパーミッションのデフォルトを指定します。</td></tr>
</table>

<h3><a name="search">カテゴリーのパーミッション</a></h3>

<table>
<tr><th style="width:25%">項目(変数)</th>
    <th style="width:25%">デフォルト</th>
    <th style="width:50%">説明</th>
</tr>
<tr>
  <td valign="top"><a name="desc_category_permissions_0">カテゴリーのパーミッションのデフォルト[0](category_permissions[0])</a></td>
  <td valign="top"><em>表示・編集</em></td>
  <td valign="top">リンクカテゴリーに関する所有者のパーミッションのデフォルトを指定します。</td></tr>
<tr>
  <td valign="top"><a name="desc_category_permissions_1">カテゴリーのパーミッションのデフォルト[1](category_permissions[1])</a></td>
  <td valign="top"><em>表示</em></td>
  <td valign="top">リンクカテゴリーに関するグループのパーミッションのデフォルトを指定します。</td></tr>
<tr>
  <td valign="top"><a name="desc_category_permissions_2">カテゴリーのパーミッションのデフォルト[2](category_permissions[2])</a></td>
  <td valign="top"><em>表示</em></td>
  <td valign="top">リンクカテゴリーに関するメンバーのパーミッションのデフォルトを指定します。</td></tr>
<tr>
  <td valign="top"><a name="desc_category_permissions_3">カテゴリーのパーミッションのデフォルト[3](category_permissions[3])</a></td>
  <td valign="top"><em>表示</em></td>
  <td valign="top">リンクカテゴリーに関するゲストユーザーのパーミッションのデフォルトを指定します。</td></tr>
</table>

<h3><a name="search">自動タグのパーミッション</a></h3>

<table>
<tr><th style="width:25%">項目(変数)</th>
    <th style="width:25%">デフォルト</th>
    <th style="width:50%">説明</th>
</tr>
<tr>
  <td valign="top"><a name="desc_autotag_permissions_link_0">自動タグ[link: ]のパーミッション[0](autotag_permissions_link[0])</a></td>
  <td valign="top"><em>利用する</em></td>
  <td valign="top">自動タグの利用に関する所有者(デフォルトはRootユーザー)のパーミッションを指定します。</td></tr>
<tr>
  <td valign="top"><a name="desc_autotag_permissions_link_1">自動タグ[link: ]のパーミッション[1](autotag_permissions_link[1])</a></td>
  <td valign="top"><em>利用する</em></td>
  <td valign="top">自動タグの利用に関するLinks Adminグループのパーミッションを指定します。</td></tr>
<tr>
  <td valign="top"><a name="desc_autotag_permissions_link_2">自動タグ[link: ]のパーミッション[2](autotag_permissions_link[2])</a></td>
  <td valign="top"><em>利用する</em></td>
  <td valign="top">自動タグの利用に関するメンバーのパーミッションを指定します。</td></tr>
<tr>
  <td valign="top"><a name="desc_autotag_permissions_link_3">自動タグ[link: ]のパーミッション[3](autotag_permissions_link[3])</a></td>
  <td valign="top"><em>利用する</em></td>
  <td valign="top">自動タグの利用に関するゲストユーザーのパーミッションを指定します。</td></tr>
</table>

<h2><a name="layout">リンクプラグインのインデックスページのレイアウト</a></h2>

<p>リンクプラグインのインデックスページ（トップページ）のレイアウト全般は、上述の「カテゴリの表示カラム数(linkcols)」と「ページあたりのリンク数(linksperpage)」で決定されます。</p>

<p>すべてのリンクを1列に並べたい場合は、この2つに 0 を設定してください。リンクの数が少ない場合は、これが最も合理的です。「ページあたりのリンク数(linksperpage)」だけを 0 にすると、現在のカテゴリがすべて1ページで表示されます。「カテゴリの表示カラム数(linkcols)」だけを 0 に設定すると、複数ページにわたってすべてのリンクが表示されます（カテゴリは表示されません）。</p>


<h3><a name="templates">テンプレートファイル</a></h3>

<p>リンクセクションのレイアウトをさらに変更したい場合は、テンプレートファイルを変更してください。現在ではプラグインのディレクトリ、つまり、</p>
<p style="margin-left:4em;"><span class="tt">/path/to/geeklog/plugins/links/templates/</span></p><p>にあります。</p>
<p>旧バージョン(1.4.0よりも前)のGeeklog用に作成されたテーマを使用している場合は、テーマのディレクトリに "links" ディレクトリがあるかもしれませんが、ここはもはや使用されていないので削除しても差し支えありません。</p>


<h2><a name="autotags">自動タグ</a></h2>

<p>リンクプラグインは、<code>[link:]</code>という<a href="https://www.geeklog.net/article.php/autolinks" title="geeklog.net: About Autolinks and Autotags">自動タグ</a>を提供します。このタグを使用すると、完全なURLを記述せずに、リンクセクションに表示されているリンクを記事やコメントなどに埋め込むことができます。コロンの後にリンクIDを記述してください。リンクが作成され、元のリンクのタイトルがリンクテキストとして使用されます。別の方法としては、リンクIDの後に半角スペースに続けて独自のリンクテキストを指定することもできます(閉じカッコの前でなければなりません)。</p>

<p>geeklog.netを例に取ると、</p>
<ul>
<li><code>[link:20030921074903113]</code> は <code>&lt;a href="https://www.geeklog.net/links/portal.php/link/20030921074903113"&gt;Groklaw&lt;/a&gt;</code> に変換されます。</li>
<li><code>[event:20030921074903113 read everything about the SCO case]</code> は <code>&lt;a href="https://www.geeklog.net/links/portal.php/link/20030921074903113"&gt;read everything about the SCO case&lt;/a&gt;</code> に変換されます。</li>
</ul>

<p>リンクのクリック数を数えるために、<code>[link:]</code>自動タグは常にGeeklogの <span class="tt">portal.php</span> 経由のリンクを作成することにご注意ください。</p>


<div class="footer">
    <a href="http://wiki.geeklog.net/">Geeklogドキュメント作成プロジェクト</a>、<a href="http://wiki.geeklog.jp/">Geeklogドキュメント日本語版作成プロジェクト</a><br />
    本ページのすべての商標と著作権はそれぞれの所有者に帰属します。Geeklogはコピーレフトです。
</div>

</body>
</html>
