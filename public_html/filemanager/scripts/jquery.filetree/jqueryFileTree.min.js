// jQuery File Tree Plugin
//
// Version 1.01
//
// Cory S.N. LaViska
// A Beautiful Site (http://abeautifulsite.net/)
// 24 March 2008
//
// TERMS OF USE
// 
// jQuery File Tree is licensed under a Creative Commons License and is copyrighted (C)2008 by Cory S.N. LaViska.
// For details, visit http://creativecommons.org/licenses/by/3.0/us/
//
if(jQuery)(function($){$.extend($.fn,{fileTree:function(o,h){
if(!o)var o={};if(o.root==undefined)o.root='/';if(o.datafunc==undefined)o.datafunc=null;if(o.script==undefined)o.script='jqueryFileTree.php';if(o.folderEvent==undefined)o.folderEvent='click';if(o.expandSpeed==undefined)o.expandSpeed=500;if(o.collapseSpeed==undefined)o.collapseSpeed=500;if(o.expandEasing==undefined)o.expandEasing=null;if(o.collapseEasing==undefined)o.collapseEasing=null;if(o.multiFolder==undefined)o.multiFolder=true;if(o.loadMessage==undefined)o.loadMessage='Loading...';if(o.folderCallback==undefined)o.folderCallback=null;if(o.after==undefined)o.after=null;if(o.expandedFolder==undefined)o.expandedFolder='';$(this).each(function(){function showTree(c,t){function showData(data){$(c).find('.start').html('');$(c).removeClass('wait').append(data);if(o.root==t)$(c).find('UL:hidden').show();else $(c).find('UL:hidden').slideDown({duration:o.expandSpeed,easing:o.expandEasing});bindTree(c);if(o.expandedFolder!=null){$(c).find(".directory.collapsed").each(function(i,f){if((o.expandedFolder).match($(f).children().attr('rel'))){showTree($(f),$(f).children().attr('rel').match(/.*\//));$(f).removeClass('collapsed').addClass('expanded');};});}o.after(data);}$(c).addClass('wait');$(".jqueryFileTree.start").remove();if(o.datafunc)o.datafunc(t,showData);else $.post(o.script,{dir:t},showData);}function bindTree(t){$(t).find('LI A').bind(o.folderEvent,function(){if($(this).parent().hasClass('directory')){if($(this).parent().hasClass('collapsed')){if(!o.multiFolder){$(this).parent().parent().find('UL').slideUp({duration:o.collapseSpeed,easing:o.collapseEasing});$(this).parent().parent().find('LI.directory').removeClass('expanded').addClass('collapsed');}$(this).parent().find('UL').remove();showTree($(this).parent(),$(this).attr('rel').match(/.*\//));$(this).parent().removeClass('collapsed').addClass('expanded');}else{$(this).parent().find('UL').slideUp({duration:o.collapseSpeed,easing:o.collapseEasing});$(this).parent().removeClass('expanded').addClass('collapsed');}o.folderCallback($(this).attr('rel'));}else{h($(this).attr('rel'));}return false;});if(o.folderEvent.toLowerCase!='click')$(t).find('LI A').bind('click',function(){return false;});}$(this).html('<ul class="jqueryFileTree start"><li class="wait">'+o.loadMessage+'<li></ul>');showTree($(this),o.root);});}});})(jQuery);